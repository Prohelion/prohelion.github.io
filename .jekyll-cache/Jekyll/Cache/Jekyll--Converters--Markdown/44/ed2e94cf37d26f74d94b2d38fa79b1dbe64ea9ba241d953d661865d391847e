I"x<h2 id="gps-and-google-earth-integration">GPS and Google Earth Integration</h2>

<p>The Telemetry system can track your current location which can then be displayed on Google Maps.</p>

<p>We us the iPhone app GPS2IP to capture the GPS data and push it to the telemetry system</p>

<p><a href="https://itunes.apple.com/us/app/gps-2-ip/id408625926?mt=8">https://itunes.apple.com/us/app/gps-2-ip/id408625926?mt=8</a></p>

<p><img src="/images/telemetry_GPS.png" alt="Iphone GPS Coordinate example" /></p>

<p>The reason we use an iPhone app is simply redundancy and ease of development. The iPhone is typically mounted on the dash of the chase car and connected to the in car Wifi network. It captures GPS data and then transmits it to the Telemetry application which is listening on a socket for the GPS data. The Telemetry application then broadcasts the GPS data as CANbus packets for other devices to receive.</p>

<p>The Telemetry system integrates with Google Earth to allow you to visualize your strategy and plan landing spots later in the day. For this feature to work you need to have Google Earth installed and then go to the Fleet Management page in the telemetry system (<a href="http://localhost:9000/fleet.html">http://localhost:9000/fleet.html</a>) and click the strategy speed predictions link. The system will then produce a KML file and Google Earth (or whatever KML visualization tool you use will load).</p>

<p>The route is created based on the \config\route\routedata.csv file and the displayed strategies are taken from the \config\Strategy Drop Folder directory. Note that the telemetry tool does not actually create a strategy for you, it simply visualizes your current strategy. You will need to produce your own tool to create a strategy file in the correct format (information on the format is below).</p>

<p><img src="/images/telemetry_googleearth.png" alt="Example of the Google Earth Pro interface" /></p>

<p>Selecting current speed on the menu shows where the car will be on the road using your current speed. By selecting current speed (+1) you will see where you will be if you were to go 1kph faster etc.</p>

<p>When GPS Integration is enabled, the car itself will appear on the map showing your current location.</p>

<p>However, as the vehicle is not currently on the route, it’s not showing in the image above.</p>

<p>Strategy files should be generated from your strategy system and be placed in the \config\Strategy Drop Folder in your Telemetry system configuration. The strategy file is a CSV file and should have a format as follows.</p>

<table>
  <tbody>
    <tr>
      <td>Time</td>
      <td>Velocity</td>
      <td>km_From_Start</td>
      <td>km_Remaining</td>
      <td>Lat</td>
      <td>Long</td>
      <td>Altd_m</td>
      <td>SOC</td>
      <td>SOC_Wh</td>
    </tr>
    <tr>
      <td>Array_Power_W</td>
      <td>Irradiance_W</td>
      <td>Power_Usage_W</td>
      <td> </td>
      <td> </td>
      <td> </td>
      <td> </td>
      <td> </td>
      <td> </td>
    </tr>
  </tbody>
</table>

<p>An example strategy file is included with the code called, strategy.csv you can find it in the \config\Strategy Drop Folder</p>

:ET