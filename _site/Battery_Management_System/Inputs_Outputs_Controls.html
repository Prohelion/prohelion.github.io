

<!DOCTYPE html>

	<html lang="en-US">

	<head>
		<meta charset="UTF-8">
		<meta http-equiv="x-ua-compatible" content="ie=edge">
		<meta name="viewport" content="width=device-width, minimum-scale=1.0">
		
			<title>Inputs, Outputs and Controls | Prohelion</title>
		
		
		
			<meta name="keywords" content="BMS,">
		
		<link rel="icon" href="/favicon.ico" type="image/x-icon">
		<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=IBM+Plex+Mono|IBM+Plex+Sans:400,400i,500,500i,700,700i">
		<link rel="stylesheet" href="/dox-theme/assets/css/style.css">
	</head>
	<body>
		
			<div class="c-offcanvas">
				<div class="c-offcanvas__inner">
					
						<ul class="c-nav c-nav--stacked u-mx-auto">
							
								<li><a href="https://www.prohelion.com">Prohelion Website</a></li>
							
						</ul><!-- /.c-nav -->
					
					
						
							<a href="/" class="c-btn c-btn--md c-btn--gray u-text-md">
								Documentation Homepage
								<div class="c-btn__icon">
									<i class="o-icon o-icon--book"></i>
								</div>
							</a>
						
					
				</div><!-- /.c-offcanvas__inner -->
			</div><!-- /.c-offcanvas -->
		

		
			<header class="c-header u-text-white u-bg-primary">
				<div class="o-container">
					<div class="o-row">
						<div class="o-col-12">
							<div class="u-flex u-items-center">
								
									<div class="c-logo">
										<a href="/" class="c-logo__link">
											<img src="/dox-theme/assets/images/layout/logo.png">
										</a><!-- /.c-logo__link -->
									</div><!-- /.c-logo -->
								
								
									<div class="u-flex u-items-center u-ml-auto">
										
											<ul class="c-nav u-mb-0 u-hidden u-block@lg">
												
													
													<li class=""><a href="https://www.prohelion.com">Prohelion Website</a></li>
												
											</ul><!-- /.c-nav -->
										
										
											<div class="u-ml-5 u-hidden u-block@lg">
												
													<a href="/" class="c-btn c-btn--md c-btn--white u-text-md">
														Documentation Homepage
														<div class="c-btn__icon">
															<i class="o-icon o-icon--book"></i>
														</div>
													</a>
												
											</div>
										
									</div>
								
								<button class="c-hamburger-icon c-hamburger-icon--slider c-hamburger-icon--white js-hamburger-icon js-offcanvas-toggle u-ml-auto u-hidden@lg" type="button">
									<span class="c-hamburger-icon__box">
										<span class="c-hamburger-icon__inner"></span>
									</span><!-- /.c-hamburger-icon__box -->
								</button><!-- /.c-hamburger-icon -->
							</div>
						</div><!-- /.o-col -->
					</div><!-- /.o-row -->
				</div><!-- /.o-container -->
			</header><!-- /.c-header -->
		










	<div class="u-pt-8 u-pb-5" style="margin-top: 50px;"> 
		<div class="o-container">
			<div class="o-row">
				
					<div class="o-col-8@lg o-col-7@xl">
						<div class="c-post u-mb-3@lg js-post">
							<h2 id="fanpump-control">FAN/PUMP CONTROL</h2>
<p>The BMU provides two 12V switched outputs to drive pack fans and pumps. These are provided on a standard 3-pin KK connector as used in PCs and other IT equipment.  Both outputs are switched together, ie both on or both off.</p>

<p>The 12V to power these outputs is sourced from the contactor supply input connection.Refer to the datasheet for current and voltage ratings for these outputs.</p>

<p>Both connections provide a speed sensor input pin, and this is measured by the BMU and reported as an rpm number for each connection on the CAN bus telemetry.  It assumes a 2 pulse per revolution sensor output, as is commonly used for most PC cooling fans.</p>

<p>The BMS firmware switches both outputs on when the BMS is in Run mode (once precharge has completed and the system is fully operational).</p>

<h3 id="fanpump-connectors">FAN/PUMP CONNECTORS</h3>
<p>The connector used for the pump/fan outputs is a 3-way 2.54mm pitch Molex KK connector.  The pinout is shown below, as viewed from the wire side – as you would look at it while inserting crimps.</p>

<p><img src="/images/IMPS_BMU_Fan_Connectors.gif" alt="BMU Fan Connectors" /></p>

<p>The pinout follows the standard used for PC cooling fans and pumps, as found on</p>

<p>any computer motherboard or peripheral.  Please note that the wire colours used on fans and pumps varies with each manufacturer.</p>

<h2 id="relay-output">RELAY OUTPUT</h2>
<p>The BMU provides a voltage-free relay output to use for signalling devices in the vehicle that are not capable of receiving CAN bus data.  This can be used, for example, to control the ‘enable’ input of a DC/DC converter or drive a relay or HV contactor.   A coil suppression diode must be used if driving this type of load.</p>

<p>Refer to the datasheet for current and voltage ratings of the relay.</p>

<p>The relay is active when the BMS is in Run mode.</p>

<p>The connector also provides 12V and GND pins, which are sourced from the 12V contactor supply power.  These can be conveniently used in conjunction with the relay to switch 12V out to a load that requires power, for instance to drive another relay, fan or contactor.</p>

<h3 id="relay-output-connector">RELAY OUTPUT CONNECTOR</h3>
<p>The connector used for the Relay output is a 6-way 4.2mm pitch Molex MiniFit Jr connector.  The pinout is shown below, as viewed from the wire side – as you would look at it while inserting crimps.</p>

<p><img src="/images/IMPS_BMU_Relay_Output_Connector.gif" alt="BMU Relay Output Connector" /></p>

<p>The +12V and Ground pins in this connector are wired (on the BMU PCB) to the Contactor 12V supply connector, and can be jumpered across to the relay pins to provide 12V output on relay active or inactive, switch loads to ground, etc, depending on the jumper arrangement.</p>

<p>The Relay pins in this connector are wired directly to a small relay on the BMU PCB.  Refer to the datasheet for the ratings on this relay.</p>

<h2 id="vehicle-can-bus">VEHICLE CAN BUS</h2>
<h3 id="can-network-topology">CAN NETWORK TOPOLOGY</h3>
<p>The CAN bus is structured as a linear network, with short stubs branching from ‘T’ connectors on the main bus backbone to each device.  The CAN bus data lines must be terminated at each end of the main bus with 120 ohm resistors between the CAN-H and CAN-L signals.</p>

<p>In the range of Tritium EV products, including the WaveSculptor 200, EV Driver</p>

<p>Controls, and BMU, the CAN connections are implemented with an ‘in’ and an ‘out’ connector, therefore placing the ‘T’ on the device, resulting in a very short fixed-length stub on the circuit board of each device.  This is ideal from a signal integrity and network performance point of view.</p>

<p><img src="/images/IMPS_BMU_Vechicle_CAN_BUS_Topology.jpg" alt="BMU Vechicle CAN BUS Topology" /></p>

<p>The BMU uses the vehicle CAN bus to receive operating and configuration commands and transmit telemetry, as well as a source of low-voltage DC power to operate the electronics.</p>

<h3 id="can-wiring">CAN WIRING</h3>
<p>The CAN data lines (CAN-H and CAN-L) must be implemented with twisted-pair wire for proper data integrity.  The wire should have a characteristic impedance of 120 ohms.</p>

<p>Power should also be provided along the CAN cable, ideally with another twisted pair to minimise noise pickup.  An overall shield can also be advantageous.</p>

<p>The optimal choice of cable is 7mm Devicenet CANbus ‘thin’ cable, with 24AWG (data) + 22AWG (power) twisted pairs and a braided shield.  Using this cable will result in a robust installation, with high immunity to noise, low voltage drop in the power cable, and reliable CAN communications.  Using alternative cabling will usually result in problems during operation.</p>

<h3 id="vehicle-can-bus-connectors">VEHICLE CAN BUS CONNECTORS</h3>
<p>The connector used on the BMU and other Tritium devices for the CAN connection is a 6-way 3mm pitch Molex MicroFit connector.  The pinout is shown below, as viewed from the wire side – as you would look at it while inserting crimps.  The colours shown match those in the standard DeviceNet CAN cabling pairs.</p>

<p><img src="/images/IMPS_BMU_Vehicle_CAN_BUS_Connectors.gif" alt="BMU Vehicle CanBUS Connectors" /></p>

<h3 id="can-shielding">CAN SHIELDING</h3>
<p>If the recommended braided shield is used in the cable, then terminate it to the SHIELD pin (lower-left corner on the connector) on both CAN IN and CAN OUT connectors on each device.</p>

<p>On one device only in the network, instead of using the SHIELD pin, terminate the shield to the SHIELD GROUND pin (upper-left corner on the connector) on both CAN IN and CAN OUT connectors, to ground the shield for the entire network at this single point.  The usual place to do this is where power is fed into the network, typically at Tritium’s EV Driver Controls product.</p>

<h3 id="can-termination">CAN TERMINATION</h3>
<p>To implement the required 120 Ohm termination resistor at each end of the CAN bus, plug a connector into the unused CAN connector on the last device at each end of the network with a resistor crimped into the appropriate locations.</p>

<h3 id="communications">COMMUNICATIONS</h3>
<p>The CAN standard does not specify high-level message protocols. Tritium devices use a custom protocol, outlined in the communication specification document for each device.</p>

<p>By default, each device operates at 500 kbits/second and comes programmed from the factory with a CAN base address that will allow it to work in unison with other Tritium devices. The CAN bit rate and base address can be set with the Windows BMS configuration software.</p>

<h3 id="power-supply">POWER SUPPLY</h3>
<p>The BMS electronics operate from 12V supplied on the CAN bus connector, which is switched on by the Tritium EV Driver Controls when it is in accessories or run key switch positions.</p>

<p>A second high-current 12V supply connection is present for contactor and fan operating power, refer to the precharge section of this document for more details.  The CAN Ground and Contactor Supply Ground must be both tied to the vehicle chassis at some point in the system.</p>

<p>The allowable voltage range for both supplies is 10-15V.</p>

							
							
						</div><!-- /.c-post -->
					</div><!-- /.o-col -->
								
				
					<div class="o-col-3@lg o-offset-1@lg o-offset-2@xl">
						<ul class="c-page-nav u-sticky u-pin-t-6 u-mt-4 u-mt-1@lg u-mb-1 u-mb-4@lg">
														
							
								
									
								
							
								
									
								
							
								
									
										
											<li class="is-active">
												<a href="/Battery_Management_System/Overview.html">
													<p class="c-page-nav__heading">BMS Overview</p>
												</a>
											</li>
										
									
								
							
								
									
								
							
								
									
								
							
								
									
								
							
								
									
								
							
								
									
								
							
								
									
										
											<li class="is-active">
												<a href="/Battery_Management_System/CMU_Overview.html">
													<p class="c-page-nav__heading">CMU Overview</p>
												</a>
											</li>
										
									
								
							
								
									
								
							
								
									
								
							
								
									
								
							
								
									
										
											<li class="is-active">
												<a href="/Battery_Management_System/Contactor_Precharge.html">
													<p class="c-page-nav__heading">Contactor and Precharge</p>
												</a>
											</li>
										
									
								
							
								
									
								
							
								
									
								
							
								
									
								
							
								
									
								
							
								
									
										
											<li class="is-active">
												<a href="/Battery_Management_System/Operating_Thresholds_State.html">
													<p class="c-page-nav__heading">Operating Thresholds and State</p>
												</a>
											</li>
										
									
								
							
								
									
								
							
								
									
										
											<li class="is-active">
												<a href="/Battery_Management_System/Inputs_Outputs_Controls.html">
													<p class="c-page-nav__heading">Inputs, Outputs and Controls</p>
												</a>
											</li>
										
									
								
							
								
									
								
							
								
									
										
											<li>
												<a href="/Battery_Management_System/BMS_Telemetry_Viewing_Software.html">
													<p class="c-page-nav__heading">BMS Telemetry Viewing Software</p>
												</a>
											</li>
										
									
								
							
								
									
										
											<li>
												<a href="/Battery_Management_System/CMU_Cell_Wiring_Procedure.html">
													<p class="c-page-nav__heading">CMU Cell Wiring Procedure</p>
												</a>
											</li>
										
									
								
							
								
									
								
							
								
									
								
							
								
									
								
							
								
									
										
											<li>
												<a href="/Battery_Management_System/BMU_Communications_Protocol.html">
													<p class="c-page-nav__heading">BMU Communications Protocol</p>
												</a>
											</li>
										
									
								
							
								
									
								
							
								
									
								
							
								
									
								
							
								
									
								
							
								
									
								
							
								
									
								
							
								
									
								
							
								
									
								
							
								
									
								
							
								
									
								
							
								
									
								
							
						</ul><!-- /.c-page-nav -->
					</div><!-- /.o-col -->
				
			</div><!-- /.o-row -->
		</div><!-- /.o-container -->
	</div>




	<div class="u-bg-primary u-text-white u-pt-3 u-pt-4@sm u-pb-3 u-pb-4@sm">
		<div class="o-container">
			<div class="o-row">
				<div class="o-col-12 u-text-center">
					<div class="u-inline-block u-flex@sm">
						
						
							
																	
															
						
							
																	
															
						
							
								
									
									
									
																	
															
						
							
																	
															
						
							
																	
															
						
							
																	
															
						
							
																	
															
						
							
																	
															
						
							
								
									
									
									
																	
															
						
							
																	
															
						
							
																	
															
						
							
																	
															
						
							
								
									
									
									
																	
															
						
							
																	
															
						
							
																	
															
						
							
																	
															
						
							
																	
															
						
							
								
									
									
									
										<a href="/Battery_Management_System/Operating_Thresholds_State.html" class="c-arrow-link c-arrow-link--prev u-mr-auto">Operating Thresholds and State</a>
									
																	
															
						
							
																	
															
						
							
								
									
									
									
																	
															
						
							
																	
															
						
							
								
									
									
									
										<a href="/Battery_Management_System/BMS_Telemetry_Viewing_Software.html" class="c-arrow-link c-arrow-link--next u-ml-auto">BMS Telemetry Viewing Software</a>
									
																	
															
						
							
								
									
									
									
										<a href="/Battery_Management_System/CMU_Cell_Wiring_Procedure.html" class="c-arrow-link c-arrow-link--next u-ml-auto">CMU Cell Wiring Procedure</a>
									
																	
															
						
							
																	
															
						
							
																	
															
						
							
																	
															
						
							
								
									
									
									
																	
															
						
							
																	
															
						
							
																	
															
						
							
																	
															
						
							
																	
															
						
							
																	
															
						
							
																	
															
						
							
																	
															
						
							
																	
															
						
							
																	
															
						
							
																	
															
						
							
																	
															
						
					</div>
				</div><!-- /.o-col -->
			</div><!-- /.o-row -->
		</div><!-- /.o-container -->
	</div>




	

		
			<footer class="c-footer">
				<div class="o-container">
					<div class="o-row">
						<div class="o-col-12 u-mt-6 u-mt-8@md u-mb-4 u-mb-6@md">
							
								<p class="c-logo u-mb-1">
									Prohelion Documentation
								</p><!-- /.c-logo -->
							
							
								<p>Copyright &copy; 2020. - Prohelion Pty Ltd <br>All rights reserved.</p>
							
						</div><!-- /.o-col -->
					</div><!-- /.o-row -->
				</div><!-- /.o-container -->
			</footer><!-- /.c-footer -->
		

		<script type="text/javascript" src="/dox-theme/assets/js/vendor/jquery-3.3.1.min.js"></script>
		<script type="text/javascript" src="/dox-theme/assets/js/scripts.min.js"></script>

		

	</body>
</html>


